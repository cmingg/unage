<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">×</button>
    <h3 class="smaller lighter blue no-margin modal-title">Find Password</h3>
    <p>입력된 정보로 임시 비밀번호가 전송됩니다.</p>
</div>
<div class="modal-body">
    <form method="post" th:action="@{/member/findPw}">
    <div class="form-group">
        <label for="userId">ID</label>
        <input type="text" id="userId" name="userId">
    </div>
    <div class="form-group">
        <label for="userName">NAME</label>
        <input type="text" id="userName" name="userName">
    </div>
    <div class="form-group">
        <label for="email">E-MAIL</label>
        <input type="text" id="email" name="email">
    </div>
    <button type="submit">CONFIRM</button>
    <button type="button" data-dismiss="modal">CLOSE</button>
    </form>
</div>
<div class="findPw">
    <h4>발송 완료! 입력하신 이메일로 임시비밀번호가 발송되었습니다.</h4>
</div>

<div class="notFindPw">
    <h4>일치하는 정보가 없습니다 :(</h4>
    <input type="button" value="REGISTER" th:onclick="|location.href='@{/member/join}'|">
</div>
</body>
<script th:inline="javascript">
    $(document).ready(function () {
        $(".findPw").hide();
        $(".notFindPw").hide();
    });

    $("#btn-findId").click(function () {
        let userId = $("#userId").val()
        let userName = $("#userName").val();
        let email = $("#email").val();

        if (userId === "") {
            alert("아이디를 입력해주세요");
            $("#userId").focus();
            return false;
        }

        if (userName === "") {
            alert("이름을 입력해주세요.");
            $("#userName").focus();
            return false;
        }
        if (email === "") {
            alert("이메일을 입력해주세요.");
            $("#email").focus();
            return false;
        }

        $.ajax({
            url: "/member/findPw",
            type: "POST",
            data: {userId : userId, userName: userName, email : email},
            success: function (data) {
                if (data === "") {
                    $(".notFindPw").show();
                    $(".modal-body").hide();
                    $(".findPw").hide();
                } else {
                    $(".findPw").show();
                    $(".modal-body").hide();
                    $(".notFindPw").hide();
                }
            }, error: function () {
                console.log("실패");
            }
        });
    });


</script>

</html>